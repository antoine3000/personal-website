<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title property="schema:name">antoinejaunard.com - documentation</title>
<meta content="documentation" name="description"/>
<meta content="antoinejaunard.com" property="schema:name"/>
<meta content="documentation" property="schema:description"/>
<link href="assets/main.min.css" rel="stylesheet"/>
</head>
<body class="page page--article">
<main class="main">
<header class="header">
<nav class="nav">
<ul class="nav__list">
<li class="nav__item">
<a class="nav__link" href="index.html">antoinejaunard.com</a>
</li>
<li class="nav__item">
<a class="nav__link" href="content.html">content</a>
</li>
<li class="nav__item">
<a class="nav__link" href="about.html">about</a>
</li>
</ul>
</nav>
</header>
<!-- content -->
<article class="article" id="embedded-programming-esp32-barduino">
<h1 class="article__title">Programming the ESP32 — Barduino</h1>
<p class="article__parent">
    This article is part of:
    <a href="embedded-programming.html">embedded-programming</a>.
  </p>
<section class="article__content ts" id="content">
<p>We have been asked to assemble a Barduino few hours before the lab lockdown due to the coronavirus, in order to be able to experiment with it later at home.</p>
<blockquote>
<p>Barduino 2.0 started as a project to have a ESP32 fabacademy compatible board to help the students develope their work on top of it. This board was designed by Eduardo Chamorro Martin with the help of Josep Marti and Oscar Gonzalez in Fab Lab Barcelona 2020.</p>
<blockquote>
<p><a class="external" href="https://gitlab.fabcloud.org/barcelonaworkshops/barduino-2.0" target="_blank">Barduino 2.0, Gitlab</a></p>
</blockquote>
</blockquote>
<figure class="md"><img alt="arduino-pic" loading="lazy" src="medias/embedded-programming-esp32-barduino-barduino-pic.jpeg"><figcaption>arduino-pic</figcaption></figure>
<p>To use that board with PlatformIO, <code>pio init</code> a new project specifically for the ESP32 chip.</p>
<p><code>$ pio project init --board esp32-devkitlipo</code></p>
<p>This command generates the <code>platformio.ini</code> files with the desired values.</p>
<pre>
[env:esp32-devkitlipo]
platform = espressif32
board = esp32-devkitlipo
framework = arduino
</pre>
<h2 id="pinout">Pinout</h2>
<figure class="lg"><img alt="arduino-pinouts" loading="lazy" src="medias/embedded-programming-esp32-barduino-barduino-pinouts.png"><figcaption>arduino-pinouts</figcaption></figure>
<p>Then, as we can see on the datasheet, the ID of the programmable test LED is <code>13</code>. We can use it to test if our board and our configuration work properly.</p>
<h2 id="programmer-slider-switch">Programmer slider switch</h2>
<p>Also, there is a <em>Programmer Slider Switch</em> that changes the behaviour of the chip and tells it wheter it's in programming mode or execution mode. Obviously, we have to turn it to the left, the programming mode, before uploading our program.</p>
<h2 id="blink-program">Blink program</h2>
<p>Using PIN 13, as seen above.</p>
<pre>
 #include <arduino.h>

 int led_in = 13;

 void setup() {
   pinMode(led_in, OUTPUT);
 }

 void loop() {
   digitalWrite(led_in, HIGH);
   delay(1000);
   digitalWrite(led_in, LOW);
   delay(1000);
 }
</arduino.h></pre>
<p>Turn the programming slider switch to the right, in execution mode, press the reset button and the test LED should blink. Olé.</p>
</section>
<footer>
<p>✎ <span>Created</span> 21/03/2020</p>
<p>⁂ <span>Updated</span> 21/03/2020</p>
<a class="btn-vscode hidden" href="vscode://file/Users/antoine/repo/websites/personal-website/content/2020-09-01-fabacademy2020/2020-03-18-embedded-programming/2020-03-21-embedded-programming-esp32-barduino/_index.md">↗ vscode</a>
</footer>
</article>
<script>
  // show vscode button in local only
  var isLocal = window.location.href.startsWith("file://");
  var btnsCode = document.getElementsByClassName("btn-vscode");
  for (var i = 0; i < btnsCode.length; i++) {
    var btn = btnsCode[i];
    if (isLocal) {
      btn.classList.remove("hidden");
    }
  }
  // shortcut for vscode button
  if (isLocal) {
    var firstBtnCode = btnsCode[0];
    function handleClick() {
      firstBtnCode.click();
    }
    firstBtnCode.addEventListener("click", handleClick);
    function handleKeyboardShortcut(event) {
      if (event.ctrlKey && event.shiftKey && event.key === "D") {
        if (firstBtnCode) {
          firstBtnCode.click();
        }
      }
    }
    document.addEventListener("keydown", handleKeyboardShortcut);
  }
</script>
<!-- /content -->
<footer class="footer">
<p>antoinejaunard.com ☼ 2024 — <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> — <a href="https://antoinejaunard.com/rss.xml" target="_blank">RSS Feed</a></p>
</footer>
</main>
</body>
</html>